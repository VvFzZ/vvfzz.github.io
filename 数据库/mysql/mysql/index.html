<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.15.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>



<link rel="canonical" href="http://example.com/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql/","path":"数据库/mysql/mysql/","title":"mysql"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>mysql | VvfzZ</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">VvfzZ</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section">Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section">Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section">Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger">Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">简单介绍</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#windows"><span class="nav-number">2.1.</span> <span class="nav-text">windows</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux"><span class="nav-number">2.2.</span> <span class="nav-text">linux</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.</span> <span class="nav-text">数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.1.</span> <span class="nav-text">数值类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.2.</span> <span class="nav-text">日期和时间类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="nav-number">3.3.</span> <span class="nav-text">字符串类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9E%9A%E4%B8%BE%E4%B8%8E%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%EF%BC%88Enumeration-and-Set-Types%EF%BC%89"><span class="nav-number">3.4.</span> <span class="nav-text">枚举与集合类型（Enumeration and Set Types）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A9%BA%E9%97%B4%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%EF%BC%88Spatial-Data-Types%EF%BC%89"><span class="nav-number">3.5.</span> <span class="nav-text">空间数据类型（Spatial Data Types）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">三范式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DDL"><span class="nav-number">5.</span> <span class="nav-text">DDL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="nav-number">6.</span> <span class="nav-text">完整性约束</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">7.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="nav-number">7.1.</span> <span class="nav-text">字符串函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%E5%87%BD%E6%95%B0"><span class="nav-number">7.2.</span> <span class="nav-text">数字函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="nav-number">7.3.</span> <span class="nav-text">日期函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%87%BD%E6%95%B0"><span class="nav-number">7.4.</span> <span class="nav-text">高级函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E5%87%BD%E6%95%B0"><span class="nav-number">8.</span> <span class="nav-text">多行函数</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1"><span class="nav-number">9.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98"><span class="nav-number">9.1.</span> <span class="nav-text">并发问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%8F%E8%AF%BB"><span class="nav-number">9.1.1.</span> <span class="nav-text">脏读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB"><span class="nav-number">9.1.2.</span> <span class="nav-text">不可重复读</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%BB%E8%AF%BB"><span class="nav-number">9.1.3.</span> <span class="nav-text">幻读</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="nav-number">9.2.</span> <span class="nav-text">隔离级别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE"><span class="nav-number">10.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%98%E7%82%B9"><span class="nav-number">10.1.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C"><span class="nav-number">10.2.</span> <span class="nav-text">操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA"><span class="nav-number">10.2.1.</span> <span class="nav-text">新建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9"><span class="nav-number">10.2.2.</span> <span class="nav-text">修改</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">11.</span> <span class="nav-text">存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">11.1.</span> <span class="nav-text">语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="nav-number">12.</span> <span class="nav-text">一些问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%EF%BC%8C%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-number">12.1.</span> <span class="nav-text">查询语句执行流程，执行顺序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EXISTS-IN%E6%80%8E%E4%B9%88%E9%80%89%E6%8B%A9"><span class="nav-number">12.2.</span> <span class="nav-text">EXISTS IN怎么选择</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E7%9B%B8%E5%85%B3"><span class="nav-number">13.</span> <span class="nav-text">内存相关</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DELIMITER"><span class="nav-number">14.</span> <span class="nav-text">DELIMITER</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="nav-number">15.</span> <span class="nav-text">相关命令</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">VvfzZ</p>
  <div class="site-description" itemprop="description">寂寞不耐亦得耐</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">190</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="VvfzZ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="VvfzZ">
      <meta itemprop="description" content="寂寞不耐亦得耐">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="mysql | VvfzZ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          mysql
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-06-21 22:51:42" itemprop="dateCreated datePublished" datetime="2024-06-21T22:51:42+08:00">2024-06-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-04-16 23:15:08" itemprop="dateModified" datetime="2025-04-16T23:15:08+08:00">2025-04-16</time>
    </span>

  
    <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>思考每句sql语句的执行逻辑，评估最好情况的资源消耗,避免低级错误</p>
<h1 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h1><ol>
<li>开源</li>
<li>跨平台</li>
<li>轻量级</li>
<li>成本低<span id="more"></span></li>
</ol>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h2><p>登录命令： mysql -hlocalhost -uroot -p<br>显示数据库：show databases<br>使用某一数据库：use db_name<br>展示表：show tables<br>退出：quit ，exit ，\q<br>设置密码不过期：alter user‘root‘@’localhost’ identified by ‘root’password expire never;<br>设置密码加密规则： alter user ‘root‘@’localhost’ identified with mysql_native_password by ‘root’</p>
<h2 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h2><p>.</p>
<h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><ul>
<li>TINYINT  1 Bytes (-128，127)	(0，255)</li>
<li>SMALLINT 2 Bytes	(-32 768，32 767)	(0，65 535)</li>
<li>MEDIUMINT 3 Bytes	(-8 388 608，8 388 607)	(0，16 777 215)</li>
<li>INT&#x2F;INTEGER 4 Bytes	(-2 147 483 648，2 147 483 647)	(0，4 294 967 295)<br>int(10)表示显示长度<br>CREATE TABLE t1 (c1 INT(4) ZEROFILL &#x2F;&#x2F;存储10 显示0010<br>);</li>
<li>BIGINT 8 Bytes</li>
<li>FLOAT	4 Bytes</li>
<li>DOUBLE	8 Bytes</li>
<li>DECIMAL</li>
<li>binary 定长 索引查询效率高，可能浪费空间</li>
<li>varbinary 变长，充分利用空间，查询效率低于binary，要计算长度信息</li>
</ul>
<h2 id="日期和时间类型"><a href="#日期和时间类型" class="headerlink" title="日期和时间类型"></a>日期和时间类型</h2><p>类型	大小( bytes)	范围	格式	用途</p>
<ul>
<li>DATE	3	1000-01-01&#x2F;9999-12-31	YYYY-MM-DD	日期值</li>
<li>TIME	3	‘-838:59:59’&#x2F;‘838:59:59’	HH:MM:SS	时间值或持续时间</li>
<li>YEAR	1	1901&#x2F;2155	YYYY	年份值</li>
<li>DATETIME	8	‘1000-01-01 00:00:00’ 到 ‘9999-12-31 23:59:59’	YYYY-MM-DD hh:mm:ss	混合日期和时间值</li>
<li>TIMESTAMP	4	‘1970-01-01 00:00:01’ UTC 到 ‘2038-01-19 03:14:07’ UTC结束时间是第 2147483647 秒，北京时间 2038-1-19 11:14:07，格林尼治时间 2038年1月19日 凌晨 03:14:07 YYYY-MM-DD hh:mm:ss	混合日期和时间值，时间戳</li>
</ul>
<p>查询当前时间：<code>select now(),sysdate(),CURRENT_DATE();</code></p>
<h2 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h2><ul>
<li>CHAR	0-255 bytes	定长字符串<br>最大255个字符，定长性能高</li>
<li>VARCHAR	0-65535 bytes	变长字符串<br>最大长度限制65535字节（MySQL中单行数据的总大小不能超过65535字节包括所有列的长度信息和实际数据）<br>varchar(255)表示可存储255个字符<br>实际可存储的字符数取决于字符集：<br>latin1字符集（每个字符 1 字节），最大长度为65535字符。<br>utf8mb4字符集（每个字符最多 4 字节），最大长度为16383字符（65,535&#x2F;4）。</li>
</ul>
<p>如果长度小于等于255字节，1个字节存储长度信息，长度大于255字节，2个字节</p>
<ul>
<li><p>NVARCHAR<br>N代表Unicode字符<br>nvarchar(20)可存储20个字符，可以存储20个字母或20个汉字（每个都占用两字节）</p>
</li>
<li><p>TINYBLOB	0-255 bytes	不超过 255 个字符的二进制字符串</p>
</li>
<li><p>TINYTEXT	0-255 bytes	短文本字符串</p>
</li>
<li><p>BLOB	0-65 535 bytes	二进制形式的长文本数据</p>
</li>
<li><p>TEXT	0-65 535 bytes	长文本数据</p>
</li>
<li><p>MEDIUMBLOB	0-16 777 215 bytes	二进制形式的中等长度文本数据</p>
</li>
<li><p>MEDIUMTEXT	0-16 777 215 bytes	中等长度文本数据</p>
</li>
<li><p>LONGBLOB	0-4 294 967 295 bytes	二进制形式的极大文本数据</p>
</li>
<li><p>LONGTEXT	0-4 294 967 295 bytes	极大文本数据</p>
</li>
</ul>
<h2 id="枚举与集合类型（Enumeration-and-Set-Types）"><a href="#枚举与集合类型（Enumeration-and-Set-Types）" class="headerlink" title="枚举与集合类型（Enumeration and Set Types）"></a>枚举与集合类型（Enumeration and Set Types）</h2><ul>
<li>ENUM: 枚举类型，用于存储单一值，可以选择一个预定义的集合。</li>
<li>SET: 集合类型，用于存储多个值，可以选择多个预定义的集合。</li>
</ul>
<h2 id="空间数据类型（Spatial-Data-Types）"><a href="#空间数据类型（Spatial-Data-Types）" class="headerlink" title="空间数据类型（Spatial Data Types）"></a>空间数据类型（Spatial Data Types）</h2><p>GEOMETRY, POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, GEOMETRYCOLLECTION: 用于存储空间数据（地理信息、几何图形等）。</p>
<h1 id="三范式"><a href="#三范式" class="headerlink" title="三范式"></a>三范式</h1><ul>
<li>列原子性</li>
<li>数据与联合主键完全相关性</li>
<li>数据和主键直接相关性</li>
</ul>
<h1 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h1><ul>
<li>新建库<br>create database db1;</li>
</ul>
<p>show create table vvf.v_user\G</p>
<ul>
<li><p>新建表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE player (</span><br><span class="line">  id int(11) NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT &#x27;id&#x27;,</span><br><span class="line">  create_time datetime not null default CURRENT_TIMESTAMP COMMENT &#x27;创建时间&#x27;</span><br><span class="line">) ENGINE=InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;</span><br></pre></td></tr></table></figure>
<p>反引号避免和保留字段冲突<br>utf8_general_ci大小写不敏感，utf8_bin敏感</p>
</li>
<li><p>增加列<br>alter table table_name add column column_name first; &#x2F;&#x2F; 增加一列，放在最前面<br>alter table table_name add column column_name after id;&#x2F;&#x2F;增加一列放在id列后</p>
</li>
<li><p>删除列<br>alter table table_name drop column_name; 要写日志所以慢</p>
</li>
<li><p>修改列<br>alter table table_name modify  column_name type; 只修改类型<br>alter table table_name change old_column_name new_column_name type; 修改列明和类型<br>ALTER TABLE player RENAME COLUMN age to player_age</p>
</li>
<li><p>索引<br>SHOW INDEX FROM table_name;<br>创建索引<br>CREATE INDEX index_name ON table_name(column_name);<br>ALTER TABLE table_name ADD PRIMARY KEY (column_name);<br>CREATE INDEX index_name ON table_name(column1, column2);<br>CREATE UNIQUE INDEX index_name ON table_name(column_name);<br>CREATE INDEX index_name ON table_name(column_name(10)); – 只索引前10个字符<br>删除索引<br>DROP INDEX index_name ON table_name;<br>ALTER TABLE table_name DROP PRIMARY KEY;</p>
</li>
<li><p>复制表</p>
<ol>
<li>create table new_table as select * from old_table;</li>
<li>不复制数据 create table new_table as select * from old_table where 1&#x3D;2; &#x2F;&#x2F;创建表后新加的约束没有复制到新表</li>
<li>create table new_table as select name,add from old_table where age &lt; 20;</li>
</ol>
</li>
<li><p>truncate table_anme 删除数据，（删除表然后新建表）</p>
</li>
</ul>
<p>查看表详细信息 desc table_name；</p>
<h1 id="完整性约束"><a href="#完整性约束" class="headerlink" title="完整性约束"></a>完整性约束</h1><ul>
<li>PRIMARY KEY 主键<br>alter table table_name add primary key(column_name)</li>
<li>NOT NULL 非空 </li>
<li>UNIQUE 唯一<br>alter table user add [constraint name] unique (columen_name)<br>alter table drop index index_name</li>
<li>CHECK 检查</li>
<li>DEFAULT 默认值</li>
<li>AUTO_INCREMENT 自增<br>添加自增 alter table 【数据库名.】表名称 modify 字段名 数据类型 auto_increment;<br>取消自增 alter table 【数据库名.】表名称 modify 字段名 数据类型;</li>
<li>FOREIGN KEY 外键<br>alter table talbe_name add constraint  fk_name foreign key(column_name) reference table_name(column_name)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#列级约束</span><br><span class="line">create table us(</span><br><span class="line">    no int(6) primary key auto_index,</span><br><span class="line">    anme varchar(5) not null,</span><br><span class="line">    sex char(1) default &#x27;男&#x27; check(sex = &#x27;男 || sex=&#x27;女&#x27;)，</span><br><span class="line">    age int(3) check(age&gt;18 and age &lt;30),</span><br><span class="line">    email varchar(15) unique</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#表级约束</span><br><span class="line">create table us(</span><br><span class="line">    no int(6) auto_increment,</span><br><span class="line">    anme varchar(5) not null,</span><br><span class="line">    sex char(1) default &#x27;男&#x27; )，</span><br><span class="line">    age int(3) ,</span><br><span class="line">    email varchar(15),</span><br><span class="line">    class_name varchar(15),</span><br><span class="line">    constraint primary_key primary key(no),</span><br><span class="line">    constraint check_sex check(sex=&#x27;男&#x27; || sex = &#x27;女&#x27;),</span><br><span class="line">    constraint unique_email unique(email),</span><br><span class="line">    constraint fk_class_name foreign key(class_name) reference class(name)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><ul>
<li>ASCII(s)	返回字符串 s 的第一个字符的 ASCII 码。	<br>返回 CustomerName 字段第一个字母的 ASCII 码：</li>
</ul>
<p>SELECT ASCII(CustomerName) AS NumCodeOfFirstChar<br>FROM Customers;</p>
<ul>
<li>CHAR_LENGTH(s)	返回字符串 s 的字符数	<br>返回字符串 RUNOOB 的字符数</li>
</ul>
<p>SELECT CHAR_LENGTH(“RUNOOB”) AS LengthOfString;</p>
<ul>
<li>CHARACTER_LENGTH(s)	返回字符串 s 的字符数，等同于 CHAR_LENGTH(s)	<br>返回字符串 RUNOOB 的字符数</li>
</ul>
<p>SELECT CHARACTER_LENGTH(“RUNOOB”) AS LengthOfString;</p>
<ul>
<li>CONCAT(s1,s2…sn)	字符串 s1,s2 等多个字符串合并为一个字符串	<br>合并多个字符串</li>
</ul>
<p>SELECT CONCAT(“SQL “, “Runoob “, “Gooogle “, “Facebook”) AS ConcatenatedString;</p>
<ul>
<li>CONCAT_WS(x, s1,s2…sn)	同 CONCAT(s1,s2,…) 函数，但是每个字符串之间要加上 x，x 可以是分隔符	<br>合并多个字符串，并添加分隔符：</li>
</ul>
<p>SELECT CONCAT_WS(“-“, “SQL”, “Tutorial”, “is”, “fun!”)AS ConcatenatedString;</p>
<ul>
<li>FIELD(s,s1,s2…)	返回第一个字符串 s 在字符串列表(s1,s2…)中的位置	<br>返回字符串 c 在列表值中的位置：</li>
</ul>
<p>SELECT FIELD(“c”, “a”, “b”, “c”, “d”, “e”);</p>
<ul>
<li>FIND_IN_SET(s1,s2)	返回在字符串s2中与s1匹配的字符串的位置	<br>返回字符串 c 在指定字符串中的位置：</li>
</ul>
<p>SELECT FIND_IN_SET(“c”, “a,b,c,d,e”);</p>
<ul>
<li>FORMAT(x,n)	函数可以将数字 x 进行格式化 “#,###.##”, 将 x 保留到小数点后 n 位，最后一位四舍五入。	<br>格式化数字 “#,###.##” 形式：</li>
</ul>
<p>SELECT FORMAT(250500.5634, 2);     – 输出 250,500.56</p>
<ul>
<li>INSERT(s1,x,len,s2)	字符串 s2 替换 s1 的 x 位置开始长度为 len 的字符串	<br>从字符串第一个位置开始的 6 个字符替换为 runoob：</li>
</ul>
<p>SELECT INSERT(“google.com”, 1, 6, “runoob”);  – 输出：runoob.com</p>
<ul>
<li>LOCATE(s1,s)	从字符串 s 中获取 s1 的开始位置	<br>获取 b 在字符串 abc 中的位置：</li>
</ul>
<p>SELECT LOCATE(‘st’,’myteststring’);  – 5<br>返回字符串 abc 中 b 的位置：</p>
<p>SELECT LOCATE(‘b’, ‘abc’) – 2</p>
<ul>
<li>LCASE(s)	将字符串 s 的所有字母变成小写字母	<br>字符串 RUNOOB 转换为小写：</li>
</ul>
<p>SELECT LCASE(‘RUNOOB’) – runoob</p>
<ul>
<li>LEFT(s,n)	返回字符串 s 的前 n 个字符	<br>返回字符串 runoob 中的前两个字符：</li>
</ul>
<p>SELECT LEFT(‘runoob’,2) – ru</p>
<ul>
<li>LOWER(s)	将字符串 s 的所有字母变成小写字母	<br>字符串 RUNOOB 转换为小写：</li>
</ul>
<p>SELECT LOWER(‘RUNOOB’) – runoob</p>
<ul>
<li>LPAD(s1,len,s2)	在字符串 s1 的开始处填充字符串 s2，使字符串长度达到 len	<br>将字符串 xx 填充到 abc 字符串的开始处：</li>
</ul>
<p>SELECT LPAD(‘abc’,5,’xx’) – xxabc</p>
<ul>
<li>LTRIM(s)	去掉字符串 s 开始处的空格	<br>去掉字符串 RUNOOB开始处的空格：</li>
</ul>
<p>SELECT LTRIM(“    RUNOOB”) AS LeftTrimmedString;– RUNOOB</p>
<ul>
<li>MID(s,n,len)	从字符串 s 的 n 位置截取长度为 len 的子字符串，同 SUBSTRING(s,n,len)	<br>从字符串 RUNOOB 中的第 2 个位置截取 3个 字符：</li>
</ul>
<p>SELECT MID(“RUNOOB”, 2, 3) AS ExtractString; – UNO</p>
<ul>
<li>POSITION(s1 IN s)	从字符串 s 中获取 s1 的开始位置	<br>返回字符串 abc 中 b 的位置：</li>
</ul>
<p>SELECT POSITION(‘b’ in ‘abc’) – 2</p>
<ul>
<li>REPEAT(s,n)	将字符串 s 重复 n 次	<br>将字符串 runoob 重复三次：</li>
</ul>
<p>SELECT REPEAT(‘runoob’,3) – runoobrunoobrunoob</p>
<ul>
<li>REPLACE(s,s1,s2)	将字符串 s2 替代字符串 s 中的字符串 s1	<br>将字符串 abc 中的字符 a 替换为字符 x：</li>
</ul>
<p>SELECT REPLACE(‘abc’,’a’,’x’) –xbc</p>
<ul>
<li>REVERSE(s)	将字符串s的顺序反过来	<br>将字符串 abc 的顺序反过来：</li>
</ul>
<p>SELECT REVERSE(‘abc’) – cba</p>
<ul>
<li>RIGHT(s,n)	返回字符串 s 的后 n 个字符	<br>返回字符串 runoob 的后两个字符：</li>
</ul>
<p>SELECT RIGHT(‘runoob’,2) – ob</p>
<ul>
<li>RPAD(s1,len,s2)	在字符串 s1 的结尾处添加字符串 s2，使字符串的长度达到 len	<br>将字符串 xx 填充到 abc 字符串的结尾处：</li>
</ul>
<p>SELECT RPAD(‘abc’,5,’xx’) – abcxx</p>
<ul>
<li>RTRIM(s)	去掉字符串 s 结尾处的空格	<br>去掉字符串 RUNOOB 的末尾空格：</li>
</ul>
<p>SELECT RTRIM(“RUNOOB     “) AS RightTrimmedString;   – RUNOOB</p>
<ul>
<li>SPACE(n)	返回 n 个空格	<br>返回 10 个空格：</li>
</ul>
<p>SELECT SPACE(10);</p>
<ul>
<li>STRCMP(s1,s2)	比较字符串 s1 和 s2，如果 s1 与 s2 相等返回 0 ，如果 s1&gt;s2 返回 1，如果 s1&lt;s2 返回 -1	<br>比较字符串：</li>
</ul>
<p>SELECT STRCMP(“runoob”, “runoob”);  – 0</p>
<ul>
<li>SUBSTR(s, start, length)	从字符串 s 的 start 位置截取长度为 length 的子字符串	<br>从字符串 RUNOOB 中的第 2 个位置截取 3个 字符：</li>
</ul>
<p>SELECT SUBSTR(“RUNOOB”, 2, 3) AS ExtractString; – UNO</p>
<ul>
<li>SUBSTRING(s, start, length)	从字符串 s 的 start 位置截取长度为 length 的子字符串，等同于 SUBSTR(s, start, length)	<br>从字符串 RUNOOB 中的第 2 个位置截取 3个 字符：</li>
</ul>
<p>SELECT SUBSTRING(“RUNOOB”, 2, 3) AS ExtractString; – UNO</p>
<ul>
<li>SUBSTRING_INDEX(s, delimiter, number)	返回从字符串 s 的第 number 个出现的分隔符 delimiter 之后的子串。<br>如果 number 是正数，返回第 number 个字符左边的字符串。<br>如果 number 是负数，返回第(number 的绝对值(从右边数))个字符右边的字符串。	<br>SELECT SUBSTRING_INDEX(‘a<em>b’,’</em>‘,1) – a<br>SELECT SUBSTRING_INDEX(‘a<em>b’,’</em>‘,-1)    – b<br>SELECT SUBSTRING_INDEX(SUBSTRING_INDEX(‘a<em>b</em>c<em>d</em>e’,’<em>‘,3),’</em>‘,-1)    – c</li>
<li>TRIM(s)	去掉字符串 s 开始和结尾处的空格	<br>去掉字符串 RUNOOB 的首尾空格：</li>
</ul>
<p>SELECT TRIM(‘    RUNOOB    ‘) AS TrimmedString;</p>
<ul>
<li>UCASE(s)	将字符串转换为大写	<br>将字符串 runoob 转换为大写：</li>
</ul>
<p>SELECT UCASE(“runoob”); – RUNOOB</p>
<ul>
<li>UPPER(s)	将字符串转换为大写	<br>将字符串 runoob 转换为大写：</li>
</ul>
<p>SELECT UPPER(“runoob”); – RUNOOB</p>
<h2 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h2><ul>
<li>ABS(x)	返回 x 的绝对值　　	<br>返回 -1 的绝对值：</li>
</ul>
<p>SELECT ABS(-1) – 返回1</p>
<ul>
<li>ACOS(x)	求 x 的反余弦值（单位为弧度），x 为一个数值	<br>SELECT ACOS(0.25);</li>
<li>ASIN(x)	求反正弦值（单位为弧度），x 为一个数值	<br>SELECT ASIN(0.25);</li>
<li>ATAN(x)	求反正切值（单位为弧度），x 为一个数值	<br>SELECT ATAN(2.5);</li>
<li>ATAN2(n, m)	求反正切值（单位为弧度）	<br>SELECT ATAN2(-0.8, 2);</li>
<li>AVG(expression)	返回一个表达式的平均值，expression 是一个字段	<br>返回 Products 表中Price 字段的平均值：</li>
</ul>
<p>SELECT AVG(Price) AS AveragePrice FROM Products;</p>
<ul>
<li>CEIL(x)	返回大于或等于 x 的最小整数　	<br>SELECT CEIL(1.5) – 返回2</li>
<li>CEILING(x)	返回大于或等于 x 的最小整数　	<br>SELECT CEILING(1.5); – 返回2</li>
<li>COS(x)	求余弦值(参数是弧度)	<br>SELECT COS(2);</li>
<li>COT(x)	求余切值(参数是弧度)	<br>SELECT COT(6);</li>
<li>COUNT(expression)	返回查询的记录总数，expression 参数是一个字段或者 * 号	<br>返回 Products 表中 products 字段总共有多少条记录：</li>
</ul>
<p>SELECT COUNT(ProductID) AS NumberOfProducts FROM Products;</p>
<ul>
<li>DEGREES(x)	将弧度转换为角度　　	<br>SELECT DEGREES(3.1415926535898) – 180</li>
<li>n DIV m	整除，n 为被除数，m 为除数	<br>计算 10 除于 5：</li>
</ul>
<p>SELECT 10 DIV 5;  – 2</p>
<ul>
<li>EXP(x)	返回 e 的 x 次方　　	<br>计算 e 的三次方：</li>
</ul>
<p>SELECT EXP(3) – 20.085536923188</p>
<ul>
<li>FLOOR(x)	返回小于或等于 x 的最大整数　　	<br>小于或等于 1.5 的整数：</li>
</ul>
<p>SELECT FLOOR(1.5) – 返回1</p>
<ul>
<li>GREATEST(expr1, expr2, expr3, …)	返回列表中的最大值	<br>返回以下数字列表中的最大值：</li>
</ul>
<p>SELECT GREATEST(3, 12, 34, 8, 25); – 34<br>返回以下字符串列表中的最大值：</p>
<p>SELECT GREATEST(“Google”, “Runoob”, “Apple”);   – Runoob</p>
<ul>
<li>LEAST(expr1, expr2, expr3, …)	返回列表中的最小值	<br>返回以下数字列表中的最小值：</li>
</ul>
<p>SELECT LEAST(3, 12, 34, 8, 25); – 3<br>返回以下字符串列表中的最小值：</p>
<p>SELECT LEAST(“Google”, “Runoob”, “Apple”);   – Apple</p>
<ul>
<li>LN	返回数字的自然对数，以 e 为底。	<br>返回 2 的自然对数：</li>
</ul>
<p>SELECT LN(2);  – 0.6931471805599453</p>
<ul>
<li>LOG(x) 或 LOG(base, x)	返回自然对数(以 e 为底的对数)，如果带有 base 参数，则 base 为指定带底数。　　	<br>SELECT LOG(20.085536923188) – 3<br>SELECT LOG(2, 4); – 2</li>
<li>LOG10(x)	返回以 10 为底的对数　　	<br>SELECT LOG10(100) – 2</li>
<li>LOG2(x)	返回以 2 为底的对数	<br>返回以 2 为底 6 的对数：</li>
</ul>
<p>SELECT LOG2(6);  – 2.584962500721156</p>
<ul>
<li>MAX(expression)	返回字段 expression 中的最大值	<br>返回数据表 Products 中字段 Price 的最大值：</li>
</ul>
<p>SELECT MAX(Price) AS LargestPrice FROM Products;</p>
<ul>
<li>MIN(expression)	返回字段 expression 中的最小值	<br>返回数据表 Products 中字段 Price 的最小值：</li>
</ul>
<p>SELECT MIN(Price) AS MinPrice FROM Products;</p>
<ul>
<li>MOD(x,y)	返回 x 除以 y 以后的余数　	<br>5 除于 2 的余数：</li>
</ul>
<p>SELECT MOD(5,2) – 1</p>
<ul>
<li>PI()	返回圆周率(3.141593）　　	<br>SELECT PI() –3.141593</li>
<li>POW(x,y)	返回 x 的 y 次方　	<br>2 的 3 次方：</li>
</ul>
<p>SELECT POW(2,3) – 8</p>
<ul>
<li>POWER(x,y)	返回 x 的 y 次方　	<br>2 的 3 次方：</li>
</ul>
<p>SELECT POWER(2,3) – 8</p>
<ul>
<li>RADIANS(x)	将角度转换为弧度　　	<br>180 度转换为弧度：</li>
</ul>
<p>SELECT RADIANS(180) – 3.1415926535898</p>
<ul>
<li>RAND()	返回 0 到 1 的随机数　　	<br>SELECT RAND() –0.93099315644334</li>
<li>ROUND(x [,y])	返回离 x 最近的整数，可选参数 y 表示要四舍五入的小数位数，如果省略，则返回整数。	<br>SELECT ROUND(1.23456) –1</li>
</ul>
<p>SELECT ROUND(345.156, 2) – 345.16</p>
<ul>
<li>SIGN(x)	返回 x 的符号，x 是负数、0、正数分别返回 -1、0 和 1　	<br>SELECT SIGN(-10) – (-1)</li>
<li>IN(x)	求正弦值(参数是弧度)　　	<br>SELECT SIN(RADIANS(30)) – 0.5</li>
<li>SQRT(x)	返回x的平方根　　	<br>25 的平方根：</li>
</ul>
<p>SELECT SQRT(25) – 5</p>
<ul>
<li>SUM(expression)	返回指定字段的总和	<br>计算 OrderDetails 表中字段 Quantity 的总和：</li>
</ul>
<p>SELECT SUM(Quantity) AS TotalItemsOrdered FROM OrderDetails;</p>
<ul>
<li>TAN(x)	求正切值(参数是弧度)	<br>SELECT TAN(1.75);  – -5.52037992250933</li>
<li>TRUNCATE(x,y)	返回数值 x 保留到小数点后 y 位的值（与 ROUND 最大的区别是不会进行四舍五入）	<br>SELECT TRUNCATE(1.23456,3) – 1.234</li>
</ul>
<h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><ul>
<li>ADDDATE(d,n)	计算起始日期 d 加上 n 天的日期	<br>SELECT ADDDATE(“2017-06-15”, INTERVAL 10 DAY);<br>-&gt;2017-06-25</li>
<li>ADDTIME(t,n)	n 是一个时间表达式，时间 t 加上时间表达式 n	<br>加 5 秒：</li>
</ul>
<p>SELECT ADDTIME(‘2011-11-11 11:11:11’, 5);<br>-&gt;2011-11-11 11:11:16 (秒)<br>添加 2 小时, 10 分钟, 5 秒:</p>
<p>SELECT ADDTIME(“2020-06-15 09:34:21”, “2:10:5”);<br>-&gt; 2020-06-15 11:44:26</p>
<ul>
<li>CURDATE()	返回当前日期	<br>SELECT CURDATE();<br>-&gt; 2018-09-19</li>
<li>CURRENT_DATE()	返回当前日期	<br>SELECT CURRENT_DATE();<br>-&gt; 2018-09-19</li>
<li>CURRENT_TIME	返回当前时间	<br>SELECT CURRENT_TIME();<br>-&gt; 19:59:02</li>
<li>CURRENT_TIMESTAMP()	返回当前日期和时间	<br>SELECT CURRENT_TIMESTAMP()<br>-&gt; 2018-09-19 20:57:43</li>
<li>CURTIME()	返回当前时间	<br>SELECT CURTIME();<br>-&gt; 19:59:02</li>
<li>DATE()	从日期或日期时间表达式中提取日期值	<br>SELECT DATE(“2017-06-15”);<br>-&gt; 2017-06-15</li>
<li>DATEDIFF(d1,d2)	计算日期 d1-&gt;d2 之间相隔的天数	<br>SELECT DATEDIFF(‘2001-01-01’,’2001-02-02’)<br>-&gt; -32</li>
<li>DATE_ADD(d，INTERVAL expr type)	计算起始日期 d 加上一个时间段后的日期，type 值可以是：<br>MICROSECOND<br>SECOND<br>MINUTE<br>HOUR<br>DAY<br>WEEK<br>MONTH<br>QUARTER<br>YEAR<br>SECOND_MICROSECOND<br>MINUTE_MICROSECOND<br>MINUTE_SECOND<br>HOUR_MICROSECOND<br>HOUR_SECOND<br>HOUR_MINUTE<br>DAY_MICROSECOND<br>DAY_SECOND<br>DAY_MINUTE<br>DAY_HOUR<br>YEAR_MONTH<br>SELECT DATE_ADD(“2017-06-15”, INTERVAL 10 DAY);<br>-&gt; 2017-06-25</li>
</ul>
<p>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL 15 MINUTE);<br>-&gt; 2017-06-15 09:49:21</p>
<p>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 HOUR);<br>-&gt;2017-06-15 06:34:21</p>
<p>SELECT DATE_ADD(“2017-06-15 09:34:21”, INTERVAL -3 MONTH);<br>-&gt;2017-03-15 09:34:21</p>
<ul>
<li>DATE_FORMAT(d,f)	按表达式 f的要求显示日期 d	<br>SELECT DATE_FORMAT(‘2011-11-11 11:11:11’,’%Y-%m-%d %r’)<br>-&gt; 2011-11-11 11:11:11 AM</li>
<li>DATE_SUB(date,INTERVAL expr type)	函数从日期减去指定的时间间隔。	<br>Orders 表中 OrderDate 字段减去 2 天：</li>
</ul>
<p>SELECT OrderId,DATE_SUB(OrderDate,INTERVAL 2 DAY) AS OrderPayDate<br>FROM Orders</p>
<ul>
<li>DAY(d)	返回日期值 d 的日期部分	<br>SELECT DAY(“2017-06-15”);<br>-&gt; 15</li>
<li>DAYNAME(d)	返回日期 d 是星期几，如 Monday,Tuesday	<br>SELECT DAYNAME(‘2011-11-11 11:11:11’)<br>-&gt;Friday</li>
<li>DAYOFMONTH(d)	计算日期 d 是本月的第几天	<br>SELECT DAYOFMONTH(‘2011-11-11 11:11:11’)<br>-&gt;11</li>
<li>DAYOFWEEK(d)	日期 d 今天是星期几，1 星期日，2 星期一，以此类推	<br>SELECT DAYOFWEEK(‘2011-11-11 11:11:11’)<br>-&gt;6</li>
<li>DAYOFYEAR(d)	计算日期 d 是本年的第几天	<br>SELECT DAYOFYEAR(‘2011-11-11 11:11:11’)<br>-&gt;315</li>
<li>EXTRACT(type FROM d)	从日期 d 中获取指定的值，type 指定返回的值。<br>type可取值为：<br>MICROSECOND<br>SECOND<br>MINUTE<br>HOUR<br>DAY<br>WEEK<br>MONTH<br>QUARTER<br>YEAR<br>SECOND_MICROSECOND<br>MINUTE_MICROSECOND<br>MINUTE_SECOND<br>HOUR_MICROSECOND<br>HOUR_SECOND<br>HOUR_MINUTE<br>DAY_MICROSECOND<br>DAY_SECOND<br>DAY_MINUTE<br>DAY_HOUR<br>YEAR_MONTH<br>SELECT EXTRACT(MINUTE FROM ‘2011-11-11 11:11:11’)<br>-&gt; 11</li>
<li>FROM_DAYS(n)	计算从 0000 年 1 月 1 日开始 n 天后的日期	<br>SELECT FROM_DAYS(1111)<br>-&gt; 0003-01-16</li>
<li>HOUR(t)	返回 t 中的小时值	<br>SELECT HOUR(‘1:2:3’)<br>-&gt; 1</li>
<li>LAST_DAY(d)	返回给给定日期的那一月份的最后一天	<br>SELECT LAST_DAY(“2017-06-20”);<br>-&gt; 2017-06-30</li>
<li>LOCALTIME()	返回当前日期和时间	<br>SELECT LOCALTIME()<br>-&gt; 2018-09-19 20:57:43</li>
<li>LOCALTIMESTAMP()	返回当前日期和时间	<br>SELECT LOCALTIMESTAMP()<br>-&gt; 2018-09-19 20:57:43</li>
<li>MAKEDATE(year, day-of-year)	基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期	<br>SELECT MAKEDATE(2017, 3);<br>-&gt; 2017-01-03</li>
<li>MAKETIME(hour, minute, second)	组合时间，参数分别为小时、分钟、秒	<br>SELECT MAKETIME(11, 35, 4);<br>-&gt; 11:35:04</li>
<li>MICROSECOND(date)	返回日期参数所对应的微秒数	<br>SELECT MICROSECOND(“2017-06-20 09:34:00.000023”);<br>-&gt; 23</li>
<li>MINUTE(t)	返回 t 中的分钟值	<br>SELECT MINUTE(‘1:2:3’)<br>-&gt; 2</li>
<li>MONTHNAME(d)	返回日期当中的月份名称，如 November	<br>SELECT MONTHNAME(‘2011-11-11 11:11:11’)<br>-&gt; November</li>
<li>MONTH(d)	返回日期d中的月份值，1 到 12	<br>SELECT MONTH(‘2011-11-11 11:11:11’)<br>-&gt;11</li>
<li>NOW()	返回当前日期和时间	<br>SELECT NOW()<br>-&gt; 2018-09-19 20:57:43</li>
<li>PERIOD_ADD(period, number)	为 年-月 组合日期添加一个时段	<br>SELECT PERIOD_ADD(201703, 5);<br>-&gt; 201708</li>
<li>PERIOD_DIFF(period1, period2)	返回两个时段之间的月份差值	<br>SELECT PERIOD_DIFF(201710, 201703);<br>-&gt; 7</li>
<li>QUARTER(d)	返回日期d是第几季节，返回 1 到 4	<br>SELECT QUARTER(‘2011-11-11 11:11:11’)<br>-&gt; 4</li>
<li>SECOND(t)	返回 t 中的秒钟值	<br>SELECT SECOND(‘1:2:3’)<br>-&gt; 3</li>
<li>SEC_TO_TIME(s)	将以秒为单位的时间 s 转换为时分秒的格式	<br>SELECT SEC_TO_TIME(4320)<br>-&gt; 01:12:00</li>
<li>STR_TO_DATE(string, format_mask)	将字符串转变为日期	<br>SELECT STR_TO_DATE(“August 10 2017”, “%M %d %Y”);<br>-&gt; 2017-08-10</li>
<li>SUBDATE(d,n)	日期 d 减去 n 天后的日期	<br>SELECT SUBDATE(‘2011-11-11 11:11:11’, 1)<br>-&gt;2011-11-10 11:11:11 (默认是天)</li>
<li>SUBTIME(t,n)	时间 t 减去 n 秒的时间	<br>SELECT SUBTIME(‘2011-11-11 11:11:11’, 5)<br>-&gt;2011-11-11 11:11:06 (秒)</li>
<li>SYSDATE()	返回当前日期和时间	<br>SELECT SYSDATE()<br>-&gt; 2018-09-19 20:57:43</li>
<li>TIME(expression)	提取传入表达式的时间部分	<br>SELECT TIME(“19:30:10”);<br>-&gt; 19:30:10</li>
<li>TIME_FORMAT(t,f)	按表达式 f 的要求显示时间 t	<br>SELECT TIME_FORMAT(‘11:11:11’,’%r’)<br>11:11:11 AM</li>
<li>TIME_TO_SEC(t)	将时间 t 转换为秒	<br>SELECT TIME_TO_SEC(‘1:12:00’)<br>-&gt; 4320</li>
<li>TIMEDIFF(time1, time2)	计算时间差值	<br>mysql&gt; SELECT TIMEDIFF(“13:10:11”, “13:10:10”);<br>-&gt; 00:00:01<br>mysql&gt; SELECT TIMEDIFF(‘2000:01:01 00:00:00’,<br>  -&gt;                 ‘2000:01:01 00:00:00.000001’);<br>  -&gt; ‘-00:00:00.000001’</li>
</ul>
<p>mysql&gt; SELECT TIMEDIFF(‘2008-12-31 23:59:59.000001’,<br>    -&gt;                 ‘2008-12-30 01:01:01.000002’);<br>        -&gt; ‘46:58:57.999999’</p>
<ul>
<li>TIMESTAMP(expression, interval)	单个参数时，函数返回日期或日期时间表达式；有2个参数时，将参数加和	<br>mysql&gt; SELECT TIMESTAMP(“2017-07-23”,  “13:10:11”);<br>-&gt; 2017-07-23 13:10:11<br>mysql&gt; SELECT TIMESTAMP(‘2003-12-31’);<br>  -&gt; ‘2003-12-31 00:00:00’</li>
</ul>
<p>mysql&gt; SELECT TIMESTAMP(‘2003-12-31 12:00:00’,’12:00:00’);<br>        -&gt; ‘2004-01-01 00:00:00’</p>
<ul>
<li>TIMESTAMPDIFF(unit,datetime_expr1,datetime_expr2)	计算时间差，返回 datetime_expr2 − datetime_expr1 的时间差	<br>mysql&gt; SELECT TIMESTAMPDIFF(DAY,’2003-02-01’,’2003-05-01’);   &#x2F;&#x2F; 计算两个时间相隔多少天<br>  -&gt; 89</li>
</ul>
<p>mysql&gt; SELECT TIMESTAMPDIFF(MONTH,’2003-02-01’,’2003-05-01’);   &#x2F;&#x2F; 计算两个时间相隔多少月<br>        -&gt; 3<br>mysql&gt; SELECT TIMESTAMPDIFF(YEAR,’2002-05-01’,’2001-01-01’);    &#x2F;&#x2F; 计算两个时间相隔多少年<br>        -&gt; -1<br>mysql&gt; SELECT TIMESTAMPDIFF(MINUTE,’2003-02-01’,’2003-05-01 12:05:55’);  &#x2F;&#x2F; 计算两个时间相隔多少分钟<br>        -&gt; 128885</p>
<ul>
<li>TO_DAYS(d)	计算日期 d 距离 0000 年 1 月 1 日的天数	<br>SELECT TO_DAYS(‘0001-01-01 01:01:01’)<br>-&gt; 366</li>
<li>WEEK(d)	计算日期 d 是本年的第几个星期，范围是 0 到 53	<br>SELECT WEEK(‘2011-11-11 11:11:11’)<br>-&gt; 45</li>
<li>WEEKDAY(d)	日期 d 是星期几，0 表示星期一，1 表示星期二	<br>SELECT WEEKDAY(“2017-06-15”);<br>-&gt; 3</li>
<li>WEEKOFYEAR(d)	计算日期 d 是本年的第几个星期，范围是 0 到 53	<br>SELECT WEEKOFYEAR(‘2011-11-11 11:11:11’)<br>-&gt; 45</li>
<li>YEAR(d)	返回年份	<br>SELECT YEAR(“2017-06-15”);<br>-&gt; 2017</li>
<li>YEARWEEK(date, mode)	返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推	<br>SELECT YEARWEEK(“2017-06-15”);<br>-&gt; 201724</li>
</ul>
<h2 id="高级函数"><a href="#高级函数" class="headerlink" title="高级函数"></a>高级函数</h2><ul>
<li>BIN(x)	返回 x 的二进制编码，x 为十进制数	<br>15 的 2 进制编码:</li>
</ul>
<p>SELECT BIN(15); – 1111</p>
<ul>
<li>BINARY(s)	将字符串 s 转换为二进制字符串	<br>SELECT BINARY “RUNOOB”;<br>-&gt; RUNOOB</li>
<li>CASE expression<br>  WHEN condition1 THEN result1<br>  WHEN condition2 THEN result2<br> …<br>  WHEN conditionN THEN resultN<br>  ELSE result<br>END	CASE 表示函数开始，END 表示函数结束。如果 condition1 成立，则返回 result1, 如果 condition2 成立，则返回 result2，当全部不成立则返回 result，而当有一个成立之后，后面的就不执行了。	<br>SELECT CASE<br>　　WHEN 1 &gt; 0<br>　　THEN ‘1 &gt; 0’<br>　　WHEN 2 &gt; 0<br>　　THEN ‘2 &gt; 0’<br>　　ELSE ‘3 &gt; 0’<br>　　END<br>-&gt;1 &gt; 0</li>
<li>CAST(x AS type)	转换数据类型	<br>字符串日期转换为日期：</li>
</ul>
<p>SELECT CAST(“2017-08-29” AS DATE);<br>-&gt; 2017-08-29</p>
<ul>
<li>COALESCE(expr1, expr2, …., expr_n)	返回参数中的第一个非空表达式（从左向右）	<br>SELECT COALESCE(NULL, NULL, NULL, ‘runoob.com’, NULL, ‘google.com’);<br>-&gt; runoob.com</li>
<li>CONNECTION_ID()	返回唯一的连接 ID	<br>SELECT CONNECTION_ID();<br>-&gt; 4292835</li>
<li>CONV(x,f1,f2)	返回 f1 进制数变成 f2 进制数	<br>SELECT CONV(15, 10, 2);<br>-&gt; 1111</li>
<li>CONVERT(s USING cs)	函数将字符串 s 的字符集变成 cs	<br>SELECT CHARSET(‘ABC’)<br>-&gt;utf-8</li>
</ul>
<p>SELECT CHARSET(CONVERT(‘ABC’ USING gbk))<br>-&gt;gbk</p>
<ul>
<li>CURRENT_USER()	返回当前用户	<br>SELECT CURRENT_USER();<br>-&gt; guest@%</li>
<li>DATABASE()	返回当前数据库名	<br>SELECT DATABASE();<br>-&gt; runoob</li>
<li>IF(expr,v1,v2)	如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2。	<br>SELECT IF(1 &gt; 0,’正确’,’错误’)<br>-&gt;正确</li>
<li>IFNULL(v1,v2)	如果 v1 的值不为 NULL，则返回 v1，否则返回 v2。	<br>SELECT IFNULL(null,’Hello Word’)<br>-&gt;Hello Word</li>
<li>ISNULL(expression)	判断表达式是否为 NULL	<br>SELECT ISNULL(NULL);<br>-&gt;1</li>
<li>LAST_INSERT_ID()	返回最近生成的 AUTO_INCREMENT 值	<br>SELECT LAST_INSERT_ID();<br>-&gt;6</li>
<li>NULLIF(expr1, expr2)	比较两个字符串，如果字符串 expr1 与 expr2 相等 返回 NULL，否则返回 expr1	<br>SELECT NULLIF(25, 25);<br>-&gt;</li>
<li>SESSION_USER()	返回当前用户	<br>SELECT SESSION_USER();<br>-&gt; guest@%</li>
<li>SYSTEM_USER()	返回当前用户	<br>SELECT SYSTEM_USER();<br>-&gt; guest@%</li>
<li>USER()	返回当前用户	<br>SELECT USER();<br>-&gt; guest@%</li>
<li>VERSION()	返回数据库的版本号	<br>SELECT VERSION()<br>-&gt; 5.6.34</li>
</ul>
<h1 id="多行函数"><a href="#多行函数" class="headerlink" title="多行函数"></a>多行函数</h1><p>min max avg sum count<br>count(column_name) 不包含为空的行<br>count(*)：包含为空的行</p>
<h1 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h1><p><code>start transaction</code><br><code>rollback</code><br><code>commit</code></p>
<h2 id="并发问题"><a href="#并发问题" class="headerlink" title="并发问题"></a>并发问题</h2><ol>
<li>脏读</li>
<li>不可重复读</li>
<li>幻读</li>
</ol>
<h3 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h3><p>一个事务读到另一个事务修改了但未提交的数据</p>
<h3 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h3><p>同一个数据在一个事务中，不同时间读到不同的值</p>
<h3 id="幻读"><a href="#幻读" class="headerlink" title="幻读"></a>幻读</h3><p>事务1读取多条记录，事务2插入几条记录，事务1在查询发现多了几条记录。</p>
<h2 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h2><ol>
<li>READ UNCOMMITED</li>
<li>READ COMMITED </li>
<li>REPEATBLE READ （default)</li>
<li>SERIALIZABLE</li>
</ol>
<p>查询当前隔离级别<br>select @@transaction_isolation;<br>修改当前会话隔离级别<br>set session transaction isolation level read uncommitted</p>
<h1 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h1><p>数据库中只存放视图的定义，没有存放数据，数据存放在原来的表中</p>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><p>简化操作，不需关注表结构<br>数据保护</p>
<h2 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h2><h3 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h3><p>&#x2F;&#x2F; 新建<br>create view view_name as<br>select * from t1<br>&#x2F;&#x2F; 新建 若已存在替换<br>create or replace view view_name as<br>select * from t1<br>where t1.id &lt;3<br>with check option &#x2F;&#x2F; 向视图插入时检查where条件</p>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><p>每次改动只能涉及一个表，若条件字段与修改字段不在一张表修改失败</p>
<h1 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h1><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><ul>
<li>create<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create procedure proc1(in name varchar(10) ,out num int)</span><br><span class="line">begin</span><br><span class="line">    if name is null or name=&#x27;&#x27; then</span><br><span class="line">        select * from t1;</span><br><span class="line">    else</span><br><span class="line">        select * from t1 where tname = name;</span><br><span class="line">    end if</span><br><span class="line">    select found_rows() into num;</span><br><span class="line">end</span><br></pre></td></tr></table></figure></li>
<li>调用<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">call proc1(null)</span><br><span class="line">call proc1(&#x27;vvf1&#x27;)</span><br></pre></td></tr></table></figure></li>
<li>删除<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop procedure proc1;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="一些问题"><a href="#一些问题" class="headerlink" title="一些问题"></a>一些问题</h1><h2 id="查询语句执行流程，执行顺序"><a href="#查询语句执行流程，执行顺序" class="headerlink" title="查询语句执行流程，执行顺序"></a>查询语句执行流程，执行顺序</h2><p>FROM 子句组装数据<br>join on （小表驱动，join前驱动表加载时优先根据where条件使用索引过滤，被驱动表在join中使用where条件过滤）<br>WHERE 子句进行条件筛选；<br>GROUP BY 分组 ；<br>使用聚集函数进行计算；<br>HAVING 筛选分组；<br>计算所有的表达式；<br>SELECT 的字段；<br>ORDER BY 排序；<br>LIMIT 筛选。</p>
<h2 id="EXISTS-IN怎么选择"><a href="#EXISTS-IN怎么选择" class="headerlink" title="EXISTS IN怎么选择"></a>EXISTS IN怎么选择</h2><p>小表驱动原则<br>exists是外表驱动<br>in是内标驱动</p>
<h1 id="内存相关"><a href="#内存相关" class="headerlink" title="内存相关"></a>内存相关</h1><p>change buffer DML操作时 将操作记录到换成，等到数据页写入内存时再应用<br>redo log<br>undo log</p>
<h1 id="DELIMITER"><a href="#DELIMITER" class="headerlink" title="DELIMITER"></a>DELIMITER</h1><p>mysql默认使用;作为结束符；在控制台执行多行语句时使用<br>临时定义新的 DELIMITER，新的结束符可以用（&#x2F;&#x2F;）或者（$$）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE `add_num`(IN n INT)</span><br><span class="line">BEGIN</span><br><span class="line">       DECLARE i INT;</span><br><span class="line">       DECLARE sum INT;</span><br><span class="line">       </span><br><span class="line">       SET i = 1;</span><br><span class="line">       SET sum = 0;</span><br><span class="line">       WHILE i &lt;= n DO</span><br><span class="line">              SET sum = sum + i;</span><br><span class="line">              SET i = i +1;</span><br><span class="line">       END WHILE;</span><br><span class="line">       SELECT sum;</span><br><span class="line">END //</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>

<h1 id="相关命令"><a href="#相关命令" class="headerlink" title="相关命令"></a>相关命令</h1><p>show engines; 查看引擎</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/mysql/" rel="tag"># mysql</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/JAVA/m/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/synchronized/" rel="prev" title="synchronizied">
                  <i class="fa fa-chevron-left"></i> synchronizied
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/JAVA/%E5%9F%BA%E7%A1%80/jdbc/" rel="next" title="jdbc">
                  jdbc <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">VvfzZ</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
