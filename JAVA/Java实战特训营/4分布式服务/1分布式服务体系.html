<hr>
<h2 id="title-1分布式服务体系description-1分布式服务体系date-2024-09-19-21-20-42tags"><a href="#title-1分布式服务体系description-1分布式服务体系date-2024-09-19-21-20-42tags" class="headerlink" title="title: 1分布式服务体系description: 1分布式服务体系date: 2024-09-19 21:20:42tags: "></a>title: 1分布式服务体系<br>description: 1分布式服务体系<br>date: 2024-09-19 21:20:42<br>tags: </h2><ul>
<li>单体与分布式系统的本质区别</li>
<li>分布式服务体系的组成结构和设计方法</li>
<li>完成客服系统一阶段分布式服务拆分</li>
</ul>
<h1 id="分布式系统概述"><a href="#分布式系统概述" class="headerlink" title="分布式系统概述"></a>分布式系统概述</h1><p>两个单体间通过网络交互，可认为是初步的分布式系统。</p>
<h2 id="单体系统的问题"><a href="#单体系统的问题" class="headerlink" title="单体系统的问题"></a>单体系统的问题</h2><ul>
<li>业务扩展性</li>
<li>性能伸缩性</li>
<li>代码复杂度</li>
</ul>
<h3 id="扩展性"><a href="#扩展性" class="headerlink" title="扩展性"></a>扩展性</h3><p>业务需求变化时，系统改动程度的控制能力。<br>改动程度越大，扩展性越差。<br>单体系统任何改动都需重新构建和发布，扩展性低。<br>原因是未对代码进行物理拆分，代码组件边界不清晰。<br>（单体系统组件划分清楚一定程度缓解扩展性问题，但不能根本解决）</p>
<h3 id="伸缩性"><a href="#伸缩性" class="headerlink" title="伸缩性"></a>伸缩性</h3><p>对系统性能的一种控制能力。<br>伸缩性判断：通过简单扩容系统性能等比例提升，则系统有较好伸缩性<br>单体系统问题：优于存在内存密集型和CPU密集型代码位于同一服务器，所以很难对资源充分利用。</p>
<h2 id="分布式系统"><a href="#分布式系统" class="headerlink" title="分布式系统"></a>分布式系统</h2><p>区别于单体系统，将系统拆分成多个独立运行的服务，互相基于网络通信协调。</p>
<h3 id="拆分策略"><a href="#拆分策略" class="headerlink" title="拆分策略"></a>拆分策略</h3><p>纵向拆分：基于不同业务场景拆分<br>横向拆分：根据能力拆分，复用和组合业务能力（不同能力的服务通过排列组合提供业务能力）</p>
<p>组合使用横向与纵向拆分</p>
<h3 id="分布式系统固有特性（问题）"><a href="#分布式系统固有特性（问题）" class="headerlink" title="分布式系统固有特性（问题）"></a>分布式系统固有特性（问题）</h3><p>分布式系统不一定适用于所有场景</p>
<ul>
<li>网络传输的三态性<br>成功、失败、超时（管理超时有成本，无法解决超时问题，只能降低其影响）</li>
<li>请求容错性<br>链路异常扩散，雪崩效应</li>
<li>系统异构性<br>多种不同技术体系</li>
<li>数据一致性<br>传统事务无效</li>
</ul>
<h1 id="构建分布式服务体系"><a href="#构建分布式服务体系" class="headerlink" title="构建分布式服务体系"></a>构建分布式服务体系</h1><h2 id="核心技术点（解决哪些问题）"><a href="#核心技术点（解决哪些问题）" class="headerlink" title="核心技术点（解决哪些问题）"></a>核心技术点（解决哪些问题）</h2><ul>
<li>可用<br>不可宕机<br>降级、限流、集群和负载均衡等</li>
<li>性能<br>异步化，资源重用</li>
<li>治理<br>服务注册和发现机制</li>
<li>扩展？？？???<br>？？？SPI机制???，异步消息</li>
</ul>
<h2 id="分布式服务体系（分布式服务的组件）"><a href="#分布式服务体系（分布式服务的组件）" class="headerlink" title="分布式服务体系（分布式服务的组件）"></a>分布式服务体系（分布式服务的组件）</h2><p>组成：分布式服务 &#x3D; 功能性组件 + 非功能性组件</p>
<h3 id="功能性组件"><a href="#功能性组件" class="headerlink" title="功能性组件"></a>功能性组件</h3><ul>
<li>传输协议</li>
<li>网络通信</li>
<li>序列化</li>
<li>服务调用</li>
</ul>
<h3 id="非功能性组件"><a href="#非功能性组件" class="headerlink" title="非功能性组件"></a>非功能性组件</h3><ul>
<li>服务治理<br>大量服务管理，注册发现</li>
<li>服务路由<br>定制化路由（确定集群中的目标服务实例）与过滤机制？</li>
<li>服务容错<br>异常处理 ，预防雪崩</li>
<li>服务监控<br>复杂长链路，无法预测异常与性能问题的发生。加入监控机制（异常监控与性能监控）可预警与即使发现处理问题</li>
</ul>
<h3 id="分布式服务框架"><a href="#分布式服务框架" class="headerlink" title="分布式服务框架"></a>分布式服务框架</h3><p>Alibaba Dubbo<br>Twitter Finagle<br>Taobao HSF<br>Google gRPC<br>Xinlang Motan<br>Facebook Thrift</p>
<h3 id="分布式服务类型"><a href="#分布式服务类型" class="headerlink" title="分布式服务类型"></a>分布式服务类型</h3><ul>
<li>工具服务 Utility Service</li>
<li>实体服务 Entity Service<br>面相业务数据处理，提供领域实体，不面向特定业务场景</li>
<li>任务服务 Task Service<br>关注业务流程，需要维护状态，决定事务边界，很大程度由组合逻辑组成，<br>多实体服务构成业务流程，如下单服务，由商品，支付，订单等实体服务组合成业务服务</li>
</ul>
<h1 id="系统演进"><a href="#系统演进" class="headerlink" title="系统演进"></a>系统演进</h1><p>多层级，服务独立化的分布式架构代码工程结构</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>分布式系统和单体系统之间区别？<br>硬件上，单体独立部署在一台机器上<br>软件上，单体一个不同组件工程代码代码边界不够清晰<br>适用于系统发展的不同阶段。<br>单体系统随着业务量增加会出现性能，可用性，扩展性，伸缩性等问题<br>分布式服务可很好地解决这些问题，当然也会引入其他问题，如一致性，异构系统集成，容错等问题</p>
